<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
  <meta content="IE=8" http-equiv="X-UA-Compatible" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="0" />
  <title>TREWS Orders Page</title>
</head>
<body>
  <script type="text/javascript">
    /**
     * Gets URL Parameters.  Returns the parameter value for the inpuuted variable
     * returns false if no variable found
     * source: https://css-tricks.com/snippets/javascript/get-url-variables/
    */
    function getQueryVariable(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if (pair[0] == variable){
          return pair[1];
        }
      }
      return(false);
    }

    function post_order() {
      var ordered = false;
      var orderElems = document.getElementById('orderparent').getElementsByTagName('a');
      if ( orderElems.length > 0 ) {
        orderElems[0].click();
        ordered = true;
      }
      // console.log('Ordered: ' + ordered.toString());
      return ordered;
    }

    // window.onload = function() {
    //   if ( getQueryVariable('fire') == 'true' ) {
    //     post_order();
    //     window.history.back();
    //   }
    // }
  </script>

  <p id="orderparent" style="display: none;">
    <OrderTemplate Key="{{ key }}" OrderMode="IP" RemoveOriginal="True">
      Place Order
    </OrderTemplate>
  </p>

  <span onclick="post_order()">
    Place Order
  </span>
</body>
</html>
